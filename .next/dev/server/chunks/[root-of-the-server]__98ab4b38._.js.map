{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///Users/baechan/project/test/link-sns/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client'\n\nconst globalForPrisma = globalThis as unknown as {\n    prisma: PrismaClient | undefined\n}\n\nexport const prisma = globalForPrisma.prisma ?? new PrismaClient()\n\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB;AAIjB,MAAM,SAAS,gBAAgB,MAAM,IAAI,IAAI,6IAAY;AAEhE,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 125, "column": 0}, "map": {"version":3,"sources":["file:///Users/baechan/project/test/link-sns/lib/auth.ts"],"sourcesContent":["import { NextAuthOptions } from \"next-auth\"\nimport GoogleProvider from \"next-auth/providers/google\"\nimport CredentialsProvider from \"next-auth/providers/credentials\"\nimport { PrismaAdapter } from \"@next-auth/prisma-adapter\"\nimport { prisma } from \"@/lib/prisma\"\nimport bcrypt from \"bcryptjs\"\n\nexport const authOptions: NextAuthOptions = {\n    adapter: PrismaAdapter(prisma),\n    providers: [\n        GoogleProvider({\n            clientId: process.env.GOOGLE_CLIENT_ID || \"\",\n            clientSecret: process.env.GOOGLE_CLIENT_SECRET || \"\",\n        }),\n        CredentialsProvider({\n            name: \"Credentials\",\n            credentials: {\n                email: { label: \"Email\", type: \"email\" },\n                password: { label: \"Password\", type: \"password\" }\n            },\n            async authorize(credentials) {\n                if (!credentials?.email || !credentials?.password) {\n                    return null\n                }\n\n                const user = await prisma.user.findUnique({\n                    where: {\n                        email: credentials.email\n                    }\n                })\n\n                if (!user || !user.password) {\n                    return null\n                }\n\n                const isPasswordValid = await bcrypt.compare(\n                    credentials.password,\n                    user.password\n                )\n\n                if (!isPasswordValid) {\n                    return null\n                }\n\n                return {\n                    id: user.id,\n                    email: user.email,\n                    name: user.name,\n                    image: user.image,\n                }\n            }\n        })\n    ],\n    session: {\n        strategy: \"jwt\"\n    },\n    pages: {\n        signIn: \"/login\",\n    },\n    callbacks: {\n        async session({ session, token }) {\n            if (token && session.user) {\n                session.user.id = token.sub as string\n            }\n            return session\n        }\n    }\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;AACA;;;;;;AAEO,MAAM,cAA+B;IACxC,SAAS,IAAA,uLAAa,EAAC,yHAAM;IAC7B,WAAW;QACP,IAAA,gKAAc,EAAC;YACX,UAAU,QAAQ,GAAG,CAAC,gBAAgB,IAAI;YAC1C,cAAc,QAAQ,GAAG,CAAC,oBAAoB,IAAI;QACtD;QACA,IAAA,qKAAmB,EAAC;YAChB,MAAM;YACN,aAAa;gBACT,OAAO;oBAAE,OAAO;oBAAS,MAAM;gBAAQ;gBACvC,UAAU;oBAAE,OAAO;oBAAY,MAAM;gBAAW;YACpD;YACA,MAAM,WAAU,WAAW;gBACvB,IAAI,CAAC,aAAa,SAAS,CAAC,aAAa,UAAU;oBAC/C,OAAO;gBACX;gBAEA,MAAM,OAAO,MAAM,yHAAM,CAAC,IAAI,CAAC,UAAU,CAAC;oBACtC,OAAO;wBACH,OAAO,YAAY,KAAK;oBAC5B;gBACJ;gBAEA,IAAI,CAAC,QAAQ,CAAC,KAAK,QAAQ,EAAE;oBACzB,OAAO;gBACX;gBAEA,MAAM,kBAAkB,MAAM,8IAAM,CAAC,OAAO,CACxC,YAAY,QAAQ,EACpB,KAAK,QAAQ;gBAGjB,IAAI,CAAC,iBAAiB;oBAClB,OAAO;gBACX;gBAEA,OAAO;oBACH,IAAI,KAAK,EAAE;oBACX,OAAO,KAAK,KAAK;oBACjB,MAAM,KAAK,IAAI;oBACf,OAAO,KAAK,KAAK;gBACrB;YACJ;QACJ;KACH;IACD,SAAS;QACL,UAAU;IACd;IACA,OAAO;QACH,QAAQ;IACZ;IACA,WAAW;QACP,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YAC5B,IAAI,SAAS,QAAQ,IAAI,EAAE;gBACvB,QAAQ,IAAI,CAAC,EAAE,GAAG,MAAM,GAAG;YAC/B;YACA,OAAO;QACX;IACJ;AACJ"}},
    {"offset": {"line": 202, "column": 0}, "map": {"version":3,"sources":["file:///Users/baechan/project/test/link-sns/app/api/posts/%5Bid%5D/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { getServerSession } from \"next-auth\";\nimport { authOptions } from \"@/lib/auth\";\nimport { prisma } from \"@/lib/prisma\";\n\nexport async function GET(\n    req: Request,\n    { params }: { params: Promise<{ id: string }> }\n) {\n    try {\n        const { id } = await params;\n\n        const post = await prisma.post.findUnique({\n            where: { id },\n            include: {\n                user: true,\n                _count: {\n                    select: {\n                        comments: true,\n                        reactions: true,\n                    }\n                },\n                bookmarks: true, // Include bookmarks for checking status\n            }\n        }) as any;\n\n        if (!post) {\n            return new NextResponse(\"Not Found\", { status: 404 });\n        }\n\n        return NextResponse.json(post);\n    } catch (error) {\n        console.error(\"[POST_GET]\", error);\n        return new NextResponse(\"Internal Error\", { status: 500 });\n    }\n}\n\nexport async function DELETE(\n    req: Request,\n    { params }: { params: Promise<{ id: string }> }\n) {\n    try {\n        const session = await getServerSession(authOptions);\n        if (!session?.user?.id) {\n            return new NextResponse(\"Unauthorized\", { status: 401 });\n        }\n\n        const { id } = await params;\n        const userId = session.user.id;\n\n        const post = await prisma.post.findUnique({\n            where: { id },\n        });\n\n        if (!post) {\n            return new NextResponse(\"Not Found\", { status: 404 });\n        }\n\n        if (post.userId !== userId) {\n            return new NextResponse(\"Forbidden\", { status: 403 });\n        }\n\n        await prisma.post.delete({\n            where: { id },\n        });\n\n        return NextResponse.json({ success: true });\n    } catch (error) {\n        console.error(\"[POST_DELETE]\", error);\n        return new NextResponse(\"Internal Error\", { status: 500 });\n    }\n}\n\nexport async function PATCH(\n    req: Request,\n    { params }: { params: Promise<{ id: string }> }\n) {\n    try {\n        const session = await getServerSession(authOptions);\n        if (!session?.user?.id) {\n            return new NextResponse(\"Unauthorized\", { status: 401 });\n        }\n\n        const { id } = await params;\n        const userId = session.user.id;\n        const body = await req.json();\n        const { title, description, tags, categories } = body;\n\n        const post = await prisma.post.findUnique({\n            where: { id },\n        });\n\n        if (!post) {\n            return new NextResponse(\"Not Found\", { status: 404 });\n        }\n\n        if (post.userId !== userId) {\n            return new NextResponse(\"Forbidden\", { status: 403 });\n        }\n\n        const updatedPost = await prisma.post.update({\n            where: { id },\n            data: {\n                title,\n                description,\n                tags,\n                categories,\n            },\n        });\n\n        return NextResponse.json(updatedPost);\n    } catch (error) {\n        console.error(\"[POST_PATCH]\", error);\n        return new NextResponse(\"Internal Error\", { status: 500 });\n    }\n}\n"],"names":[],"mappings":"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"}}]
}